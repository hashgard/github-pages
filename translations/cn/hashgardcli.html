<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hashgard 客户端 | Hashgard 文档中心</title>
    <meta name="description" content="Hashgard - 新一代数字金融公有链">
    <link rel="icon" href="/github-pages/favicon.ico">
    
    <link rel="preload" href="/github-pages/assets/css/0.styles.b9164be3.css" as="style"><link rel="preload" href="/github-pages/assets/js/app.bf5dd73f.js" as="script"><link rel="preload" href="/github-pages/assets/js/28.79a6a4bc.js" as="script"><link rel="prefetch" href="/github-pages/assets/js/10.66d8a0a0.js"><link rel="prefetch" href="/github-pages/assets/js/11.8393ad55.js"><link rel="prefetch" href="/github-pages/assets/js/12.2ccfd939.js"><link rel="prefetch" href="/github-pages/assets/js/13.a1e900b1.js"><link rel="prefetch" href="/github-pages/assets/js/14.5371c486.js"><link rel="prefetch" href="/github-pages/assets/js/15.a9ccdc54.js"><link rel="prefetch" href="/github-pages/assets/js/16.3e94299c.js"><link rel="prefetch" href="/github-pages/assets/js/17.ede0b19c.js"><link rel="prefetch" href="/github-pages/assets/js/18.3af42029.js"><link rel="prefetch" href="/github-pages/assets/js/19.a2d187e3.js"><link rel="prefetch" href="/github-pages/assets/js/2.142e358d.js"><link rel="prefetch" href="/github-pages/assets/js/20.b8d36e32.js"><link rel="prefetch" href="/github-pages/assets/js/21.205c43c0.js"><link rel="prefetch" href="/github-pages/assets/js/22.286073fa.js"><link rel="prefetch" href="/github-pages/assets/js/23.efc1cb0e.js"><link rel="prefetch" href="/github-pages/assets/js/24.2dfe9c4e.js"><link rel="prefetch" href="/github-pages/assets/js/25.d087c3a9.js"><link rel="prefetch" href="/github-pages/assets/js/26.41d9e0bc.js"><link rel="prefetch" href="/github-pages/assets/js/27.3cf1115d.js"><link rel="prefetch" href="/github-pages/assets/js/29.bd1647a7.js"><link rel="prefetch" href="/github-pages/assets/js/3.89cb87cc.js"><link rel="prefetch" href="/github-pages/assets/js/30.6ac3d706.js"><link rel="prefetch" href="/github-pages/assets/js/31.02ff2623.js"><link rel="prefetch" href="/github-pages/assets/js/32.fb021007.js"><link rel="prefetch" href="/github-pages/assets/js/33.667cd9de.js"><link rel="prefetch" href="/github-pages/assets/js/34.a48306a7.js"><link rel="prefetch" href="/github-pages/assets/js/35.851f6478.js"><link rel="prefetch" href="/github-pages/assets/js/36.74cda06d.js"><link rel="prefetch" href="/github-pages/assets/js/37.ea2a4a80.js"><link rel="prefetch" href="/github-pages/assets/js/38.c5aa82e0.js"><link rel="prefetch" href="/github-pages/assets/js/39.88839b3f.js"><link rel="prefetch" href="/github-pages/assets/js/4.46e45bad.js"><link rel="prefetch" href="/github-pages/assets/js/40.c7efa84e.js"><link rel="prefetch" href="/github-pages/assets/js/41.e6bd18b4.js"><link rel="prefetch" href="/github-pages/assets/js/42.1b3526ab.js"><link rel="prefetch" href="/github-pages/assets/js/43.bdff1f53.js"><link rel="prefetch" href="/github-pages/assets/js/44.c49a7c9a.js"><link rel="prefetch" href="/github-pages/assets/js/45.107ae8d1.js"><link rel="prefetch" href="/github-pages/assets/js/46.9f6183cf.js"><link rel="prefetch" href="/github-pages/assets/js/47.2662ebc5.js"><link rel="prefetch" href="/github-pages/assets/js/48.24949fb1.js"><link rel="prefetch" href="/github-pages/assets/js/49.90dc2b11.js"><link rel="prefetch" href="/github-pages/assets/js/5.1c9843c5.js"><link rel="prefetch" href="/github-pages/assets/js/50.2922ec7c.js"><link rel="prefetch" href="/github-pages/assets/js/51.dbff27f4.js"><link rel="prefetch" href="/github-pages/assets/js/52.c10ce7e1.js"><link rel="prefetch" href="/github-pages/assets/js/53.d08b6929.js"><link rel="prefetch" href="/github-pages/assets/js/54.201ebb77.js"><link rel="prefetch" href="/github-pages/assets/js/55.a9ff3e03.js"><link rel="prefetch" href="/github-pages/assets/js/56.75632402.js"><link rel="prefetch" href="/github-pages/assets/js/57.24c019ec.js"><link rel="prefetch" href="/github-pages/assets/js/58.74fd37d5.js"><link rel="prefetch" href="/github-pages/assets/js/59.306e59ce.js"><link rel="prefetch" href="/github-pages/assets/js/6.91a869c6.js"><link rel="prefetch" href="/github-pages/assets/js/7.9242222d.js"><link rel="prefetch" href="/github-pages/assets/js/8.49613224.js"><link rel="prefetch" href="/github-pages/assets/js/9.f4880d52.js">
    <link rel="stylesheet" href="/github-pages/assets/css/0.styles.b9164be3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/github-pages/" class="home-link router-link-active"><!----> <span class="site-name">Hashgard 文档中心</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/github-pages/translations/cn/what-is-hashgard.html" class="nav-link">教程</a></div><div class="nav-item"><a href="/github-pages/translations/cn/hashgardcli.html" class="nav-link router-link-exact-active router-link-active">命令</a></div> <a href="https://github.com/hashgard/github-pages" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/github-pages/translations/cn/what-is-hashgard.html" class="nav-link">教程</a></div><div class="nav-item"><a href="/github-pages/translations/cn/hashgardcli.html" class="nav-link router-link-exact-active router-link-active">命令</a></div> <a href="https://github.com/hashgard/github-pages" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>总览</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>教程</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/github-pages/translations/cn/installation.html" class="sidebar-link">安装hashgard</a></li><li><a href="/github-pages/translations/cn/join-testnet.html" class="sidebar-link">加入测试网</a></li><li><a href="/github-pages/translations/cn/deploy-testnet.html" class="sidebar-link">部署自己的测试网</a></li><li><a href="/github-pages/translations/cn/validators/overview.html" class="sidebar-link">验证人节点指南</a></li><li><a href="/github-pages/translations/cn/delegator-guide-cli.html" class="sidebar-link">委托人指南</a></li><li><a href="/github-pages/translations/cn/hashgardcli.html" class="active sidebar-link">Hasghard CLI 命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#hashgard-cli" class="sidebar-link">Hashgard CLI</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#配置-hashgardcli" class="sidebar-link">配置 hashgardcli</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#key" class="sidebar-link">Key</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#tx-广播" class="sidebar-link">Tx 广播</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#fees-和-gas" class="sidebar-link">Fees 和 Gas</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#账户" class="sidebar-link">账户</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#查询交易" class="sidebar-link">查询交易</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#slashing" class="sidebar-link">Slashing</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#staking" class="sidebar-link">Staking</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#治理" class="sidebar-link">治理</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#费用分配" class="sidebar-link">费用分配</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#多签交易" class="sidebar-link">多签交易</a></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#智能合约" class="sidebar-link">智能合约</a></li></ul></li><li class="sidebar-sub-header"><a href="/github-pages/translations/cn/hashgardcli.html#shell-自动补全脚本" class="sidebar-link">shell 自动补全脚本</a></li></ul></li><li><a href="/github-pages/translations/cn/smart-contract-opcode.html" class="sidebar-link">Hasghard 虚拟机</a></li><li><a href="/github-pages/translations/cn/genesis.html" class="sidebar-link">创世文件</a></li><li><a href="/github-pages/translations/cn/genesis-state.html" class="sidebar-link">创世状态</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="hashgard-客户端"><a href="#hashgard-客户端" aria-hidden="true" class="header-anchor">#</a> Hashgard 客户端</h1> <h2 id="hashgard-cli"><a href="#hashgard-cli" aria-hidden="true" class="header-anchor">#</a> Hashgard CLI</h2> <p><code>hashgardcli</code>是一个工具，使您能够与 Hashgard 网络中的节点进行交互，无论您是否自己运行它。
让我们恰当的设置它。 要安装它，请按照<a href="/github-pages/translations/cn/installation.html">安装步骤</a>进行安装。</p> <h3 id="配置-hashgardcli"><a href="#配置-hashgardcli" aria-hidden="true" class="header-anchor">#</a> 配置 hashgardcli</h3> <p>设置<code>hashgardcli</code>的主要命令如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli config <span class="token operator">&lt;</span>flag<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>
</code></pre></div><p>该命令能为每个标志设置默认值。</p> <p>首先，设置要连接的全节点的地址：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli config node <span class="token operator">&lt;</span>host<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>port

<span class="token comment"># example: hashgardcli config node https://77.87.106.33:26657</span>
</code></pre></div><p>如果您运行自己的全节点，只需使用<code>tcp://localhost:26657</code>地址即可。</p> <p>然后，让我们设置<code>--trust-node</code>标志的默认值：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli config trust-node <span class="token boolean">true</span>

<span class="token comment"># Set to true if you trust the full-node you are connecting to, false otherwise</span>
</code></pre></div><p>最后，设置我们想要与之交互链的<code>chain-id</code>：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli config chain-id cosmoshub-2
</code></pre></div><h3 id="key"><a href="#key" aria-hidden="true" class="header-anchor">#</a> Key</h3> <h4 id="key类型"><a href="#key类型" aria-hidden="true" class="header-anchor">#</a> Key类型</h4> <p>有如下类型的key：</p> <ul><li><code>gard</code> <ul><li>从通过<code>hashgardcli keys add</code>生成的账户私钥中产生</li> <li>用于接收资金</li> <li>例如 <code>gard15h6vd5f0wqps26zjlwrc6chah08ryu4hzzdwhc</code></li></ul></li> <li><code>gardvaloper</code> <ul><li>用于关联一个验证人和其操作者</li> <li>用于发起staking操作命令</li> <li>例如 <code>gardvaloper1carzvgq3e6y3z5kz5y6gxp3wpy3qdrv928vyah</code></li></ul></li> <li><code>gardpub</code> <ul><li>从通过<code>hashgardcli keys add</code>生成的账户私钥中产生</li> <li>例如 <code>gardpub1zcjduc3q7fu03jnlu2xpl75s2nkt7krm6grh4cc5aqth73v0zwmea25wj2hsqhlqzm</code></li></ul></li> <li><code>gardvalconspub</code> <ul><li>在使用<code>hashgard init</code>创建节点时生成</li> <li>使用<code>hashgard tendermint show-validator</code>获得该值</li> <li>例如 <code>gardvalconspub1zcjduepq0ms2738680y72v44tfyqm3c9ppduku8fs6sr73fx7m666sjztznqzp2emf</code></li></ul></li></ul> <h4 id="生成-key"><a href="#生成-key" aria-hidden="true" class="header-anchor">#</a> 生成 Key</h4> <p>你需要一个帐户的私钥公钥对（分别称作<code>sk</code>，<code>pk</code>）才能接收资金，发送交易，绑定交易等等。</p> <p>生成一个新的<em>secp256k1</em>密钥：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys <span class="token function">add</span> <span class="token operator">&lt;</span>account_name<span class="token operator">&gt;</span>
</code></pre></div><p>接下来，你必须创建一个密码来保护磁盘上的密钥。上述命令的输出将包含种子短语。
建议将种子短语保存在安全的地方，以便在忘记密码的情况下，最终可以使用以下命令从种子短语重新生成密钥：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys <span class="token function">add</span> --recover
</code></pre></div><p>如果你检查你的私钥，你会看到<code>&lt;account_name&gt;</code> :</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys show <span class="token operator">&lt;</span>account_name<span class="token operator">&gt;</span>
</code></pre></div><p>通过下面的命令查看验证人操作者的地址：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys show <span class="token operator">&lt;</span>account_name<span class="token operator">&gt;</span> --bech<span class="token operator">=</span>val
</code></pre></div><p>你可以查看你所有的可以使用的密钥：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys list
</code></pre></div><p>查看你节点的验证人公钥：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgard tendermint show-validator
</code></pre></div><p>请注意，这是Tendermint的签名密钥，而不是你在委托交易中使用的操作员密钥。</p> <div class="danger custom-block"><p class="custom-block-title">Warning</p> <p>我们强烈建议不要对多个密钥使用相同的密码。Hashgard 团队和 Hashgard Foundation 将不承担资金损失的责任。</p></div> <h4 id="生成多签公钥"><a href="#生成多签公钥" aria-hidden="true" class="header-anchor">#</a> 生成多签公钥</h4> <p>你可以生成一个多签公钥并将其打印：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys <span class="token function">add</span> --multisig<span class="token operator">=</span>name1,name2,name3<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span> --multisig-threshold<span class="token operator">=</span>K new_key_name
</code></pre></div><p><code>K</code>是将要对多签公钥发起的交易进行签名的最小私钥数。</p> <p><code>--multisig</code>标识必须包含要将组合成一个公钥的那些子公钥的名称，该公钥将在本地数据库中生成并存储为<code>new_key_name</code>。
通过<code>--multisig</code>提供的所有名称必须已存在于本地数据库中。
除非设置了<code>--nosort</code>标识，否则在命令行上提供密钥的顺序无关紧要，即以下命令生成两个相同的密钥：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys <span class="token function">add</span> --multisig<span class="token operator">=</span>foo,bar,baz --multisig-threshold<span class="token operator">=</span><span class="token number">2</span> multisig_address
hashgardcli keys <span class="token function">add</span> --multisig<span class="token operator">=</span>baz,foo,bar --multisig-threshold<span class="token operator">=</span><span class="token number">2</span> multisig_address
</code></pre></div><p>多签地址也可以在运行中生成并通过以下命令打印：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys show --multisig-threshold K name1 name2 name3 <span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
</code></pre></div><p>有关如何生成多签帐户，使用其签名和广播多签交易的详细信息，请参阅<a href="#%E5%A4%9A%E7%AD%BE%E4%BA%A4%E6%98%93">多签交易</a></p> <h3 id="tx-广播"><a href="#tx-广播" aria-hidden="true" class="header-anchor">#</a> Tx 广播</h3> <p>在广播交易时，<code>hashgardcli</code>接受<code>--broadcast-mode</code>标识。
这个标识的值可以是<code>sync</code>（默认值）、<code>async</code>或<code>block</code>，
其中<code>sync</code>使客户端返回 CheckTx 响应，<code>async</code>使客户端立即返回，而<code>block</code>使得 客户端等待 tx 被提交（或超时）。</p> <p>值得注意的是，在大多数情况下<strong>不</strong>应该使用<code>block</code>模式。
这是因为广播可以超时但是 tx 仍然可能存在在块中，这可能导致很多不良结果。
因此，最好使用<code>sync</code>或<code>async</code>并通过 tx hash 查询以确定 tx 何时包含在块中。</p> <h3 id="fees-和-gas"><a href="#fees-和-gas" aria-hidden="true" class="header-anchor">#</a> Fees 和 Gas</h3> <p>每笔交易可能会提供 fees 或 gas price，但不能同时提供。</p> <p>验证人可以配置最低 gas price（多币种的），并且在决定它们是否能被包含在区块中的<code>CheckTx</code>期间使用改值，
其中 <code>gasPrices &gt;= minGasPrices</code>。请注意，你的交易必须提供大于或等于验证人要求的任何接受币种的费用。</p> <p><strong>注意</strong>：有了这样的机制，验证人可能会开始在 mempool 中通过 gasPrice 来优先处理某些 txs，
因此提供更高 fee 或 gas price可能会产生更高的tx优先级。</p> <p>比如：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx send <span class="token punctuation">..</span>. --fees<span class="token operator">=</span>50000agard
</code></pre></div><p>或：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx send <span class="token punctuation">..</span>. --gas-prices<span class="token operator">=</span><span class="token number">0</span>.025agard
</code></pre></div><h3 id="账户"><a href="#账户" aria-hidden="true" class="header-anchor">#</a> 账户</h3> <h4 id="获取-token"><a href="#获取-token" aria-hidden="true" class="header-anchor">#</a> 获取 Token</h4> <p>获取token的最佳方式是通过<a href="https://wallet.hashgard.io" target="_blank" rel="noopener noreferrer">GARDBOX 钱包水龙头<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。
水龙头需要你打算用于抵押股权的<code>gard</code>开头的地址。</p> <h4 id="查询账户余额"><a href="#查询账户余额" aria-hidden="true" class="header-anchor">#</a> 查询账户余额</h4> <p>在你的地址收到token后，你可以通过以下命令查看账户的余额：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query account <span class="token operator">&lt;</span>account_cosmos<span class="token operator">&gt;</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">Note</p> <p>当你查询余额为零的帐户时，你将收到以下错误：<code>No account with address &lt;account_cosmos&gt; was found in the state.</code>
如果你在节点与区块链完全同步之前就查询，也会发生这种情况。这些都很正常。</p></div> <h4 id="发送-token"><a href="#发送-token" aria-hidden="true" class="header-anchor">#</a> 发送 Token</h4> <p>你可以通过如下命令从一个账户发送资金到另一个账户：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx send <span class="token operator">&lt;</span>destination_cosmos<span class="token operator">&gt;</span> 10faucetToken <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span> 
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">Note</p> <p><code>--amount</code>标识接收格式：<code>--amount=&lt;value|coin_name&gt;</code></p></div> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>你可能希望通过<code>--gas</code>标识限制交易可以消耗的最大燃料。如果你通过<code>--gas=auto</code>，将在执行交易前自动估gas。
gas估算可能是不准确的，因为状态变化可能发生在模拟结束和交易的实际执行之间，
因此在原始估计之上应用调整以确保能够成功地广播交易。可以通过<code>--gas-adjustment</code>标识控制调整，其默认值为1.0。</p></div> <p>现在，查看源账户和目标账户的更新后的余额：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query account <span class="token operator">&lt;</span>account_cosmos<span class="token operator">&gt;</span>
hashgardcli query account <span class="token operator">&lt;</span>destination_cosmos<span class="token operator">&gt;</span>
</code></pre></div><p>你还可以使用<code>--block</code>标识查询在特定高度区块下你的余额：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query account <span class="token operator">&lt;</span>account_cosmos<span class="token operator">&gt;</span> --block<span class="token operator">=</span><span class="token operator">&lt;</span>block_height<span class="token operator">&gt;</span>
</code></pre></div><p>你可以通过在命令行中附加<code>--dry-run</code>标识来模拟交易而不实际广播它：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx send <span class="token operator">&lt;</span>destination_cosmosaccaddr<span class="token operator">&gt;</span> 10faucetToken <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --dry-run
</code></pre></div><p>此外，你可以通过将<code>--generate-only</code>附加到命令行参数列表来构建交易并将其JSON格式打印到STDOUT：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx send <span class="token operator">&lt;</span>destination_cosmosaccaddr<span class="token operator">&gt;</span> 10faucetToken <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --generate-only <span class="token operator">&gt;</span> unsignedSendTx.json
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx sign <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span>
  unsignedSendTx.json <span class="token operator">&gt;</span> signedSendTx.json
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">Note</p> <p>标识 <code>--generate-only</code> 只能在访问本地 keybase 时使用。</p></div> <p>你可以通过下面的命令验证交易的签名：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx sign --validate-signatures signedSendTx.json
</code></pre></div><p>你可以将由JSON文件提供的已签名的交易广播至指定节点：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx broadcast --node<span class="token operator">=</span><span class="token operator">&lt;</span>node<span class="token operator">&gt;</span> signedSendTx.json
</code></pre></div><h3 id="查询交易"><a href="#查询交易" aria-hidden="true" class="header-anchor">#</a> 查询交易</h3> <h4 id="匹配一组tag"><a href="#匹配一组tag" aria-hidden="true" class="header-anchor">#</a> 匹配一组tag</h4> <p>你可以使用交易搜索命令查询与每个交易上添加的特定<code>标签集</code>匹配的交易。</p> <p>每个标签都由<code>&lt;tag&gt;:&lt;value&gt;</code>形式的键值对形成。还可以使用<code>＆</code>符号组合标签来查询更具体的结果。</p> <p>使用<code>标签</code>查询交易的命令如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query txs --tags<span class="token operator">=</span><span class="token string">'&lt;tag&gt;:&lt;value&gt;'</span>
</code></pre></div><p>使用多个<code>标签</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query txs --tags<span class="token operator">=</span><span class="token string">'&lt;tag1&gt;:&lt;value1&gt;&amp;&lt;tag2&gt;:&lt;value2&gt;'</span>
</code></pre></div><p>通过<code>page</code>和<code>limit</code>来实现分页:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query txs --tags<span class="token operator">=</span><span class="token string">'&lt;tag&gt;:&lt;value&gt;'</span> --page<span class="token operator">=</span><span class="token number">1</span> --limit<span class="token operator">=</span><span class="token number">20</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">注意</p> <p>action标签始终等于相关message的<code>Type()</code>函数返回的消息类型。</p> <h4 id="匹配一笔交易的hash"><a href="#匹配一笔交易的hash" aria-hidden="true" class="header-anchor">#</a> 匹配一笔交易的hash</h4> <p>你一可以通过指定hash值查询该笔交易：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query tx <span class="token punctuation">[</span>hash<span class="token punctuation">]</span>
</code></pre></div><h3 id="slashing"><a href="#slashing" aria-hidden="true" class="header-anchor">#</a> Slashing</h3> <h4 id="unjailing"><a href="#unjailing" aria-hidden="true" class="header-anchor">#</a> Unjailing</h4> <p>将你入狱的验证人释放出狱：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx slashing unjail --from <span class="token operator">&lt;</span>validator-operator-addr<span class="token operator">&gt;</span>
</code></pre></div><h4 id="signing-info"><a href="#signing-info" aria-hidden="true" class="header-anchor">#</a> Signing Info</h4> <p>检索一个验证人的签名信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query slashing signing-info <span class="token operator">&lt;</span>validator-pubkey<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询参数"><a href="#查询参数" aria-hidden="true" class="header-anchor">#</a> 查询参数</h4> <p>你可以查询当前的slashing参数：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query slashing params
</code></pre></div><h3 id="staking"><a href="#staking" aria-hidden="true" class="header-anchor">#</a> Staking</h3> <h4 id="设置一个验证人"><a href="#设置一个验证人" aria-hidden="true" class="header-anchor">#</a> 设置一个验证人</h4> <p>有关如何设置验证人候选者的完整指南，请参阅<a href>验证人设置</a>章节</p> <h4 id="向一个验证人委托"><a href="#向一个验证人委托" aria-hidden="true" class="header-anchor">#</a> 向一个验证人委托</h4> <p>一旦主网上线，你可以把<code>GARD</code>委托给一个验证人。这些委托人可以收到部分验证人的收益。
阅读<a href="/github-pages/translations/cn/delegator-guide-cli.html">委托人指南</a>了解更多信息。</p> <h4 id="查询验证人"><a href="#查询验证人" aria-hidden="true" class="header-anchor">#</a> 查询验证人</h4> <p>你可以查询指定链的验证人：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking validators
</code></pre></div><p>如果你想要获得单个验证人的信息，你可以使用下面的命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking validator <span class="token operator">&lt;</span>account_gardval<span class="token operator">&gt;</span>
</code></pre></div><h4 id="绑定-token"><a href="#绑定-token" aria-hidden="true" class="header-anchor">#</a> 绑定 Token</h4> <p>在 Hashgard 网络中，我们绑定<code>agard</code>，<code>1gard = 1000000000000000000agard</code>。
你可以把token绑定在一个测试网验证人节点上（即委托）：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx staking delegate <span class="token punctuation">\</span>
  --amount<span class="token operator">=</span>10000000gard <span class="token punctuation">\</span>
  --validator<span class="token operator">=</span><span class="token operator">&lt;</span>validator<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><p><code>&lt;validator&gt;</code>是你要委托的验证人的操作者地址。如果你运行的是本地testnet，可以通过以下方式找到：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys show <span class="token punctuation">[</span>name<span class="token punctuation">]</span> --bech val
</code></pre></div><p>其中<code>[name]</code>是初始化<code>hashgard</code>时指定的键的名称。</p> <p>虽然token是绑定的，但它们与网络中的所有其他绑定的token汇集在一起。验证人和委托人获得一定比例的股权，
这些股权等于他们在这个资产池中的抵押。</p> <h4 id="查询委托"><a href="#查询委托" aria-hidden="true" class="header-anchor">#</a> 查询委托</h4> <p>一旦提交了一笔对验证人的委托，你可以使用下面的命令查看委托详情：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking delegation <span class="token operator">&lt;</span>delegator_addr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>validator_addr<span class="token operator">&gt;</span>
</code></pre></div><p>或者你想查看所有当前的委托：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking delegations <span class="token operator">&lt;</span>delegator_addr<span class="token operator">&gt;</span>
</code></pre></div><p>你还可以通过添加<code>--height</code>标识来获取先前的委托状态。</p> <h4 id="解绑-token"><a href="#解绑-token" aria-hidden="true" class="header-anchor">#</a> 解绑 Token</h4> <p>如果出于一些原因验证人行为异常，或者你想解绑一定数量的token，请使用以下命令。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx staking unbond <span class="token punctuation">\</span>
  <span class="token operator">&lt;</span>validator_addr<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  10atom <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><p>经过解绑期后，解绑自动完成。</p> <h4 id="查询unbonding-delegations"><a href="#查询unbonding-delegations" aria-hidden="true" class="header-anchor">#</a> 查询Unbonding-Delegations</h4> <p>一旦你开始了一笔unbonding-delegation，你可以使用以下命令查看信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking unbonding-delegation <span class="token operator">&lt;</span>delegator_addr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>validator_addr<span class="token operator">&gt;</span>
</code></pre></div><p>或者你可以查看当前你所有的unbonding-delegation:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking unbonding-delegations <span class="token operator">&lt;</span>account_cosmos<span class="token operator">&gt;</span>
</code></pre></div><p>此外，你可以从特定验证人获取所有unbonding-delegation：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking unbonding-delegations-from <span class="token operator">&lt;</span>account_gardval<span class="token operator">&gt;</span>
</code></pre></div><p>要获取指定区块时的unbonding-delegation状态，请尝试添加<code>--height</code>标识。</p> <h4 id="重新委托token"><a href="#重新委托token" aria-hidden="true" class="header-anchor">#</a> 重新委托token</h4> <p>重新授权是一种委托类型，允许你将非流动token从一个验证人上绑定到另一个验证人：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx staking redelegate <span class="token punctuation">\</span>
  <span class="token operator">&lt;</span>src-validator-operator-addr<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  <span class="token operator">&lt;</span>dst-validator-operator-addr<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  10atom <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>key_name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><p>这里，你还可以使用<code>shares-amount</code>或<code>shares-fraction</code>标识重新委托。</p> <p>经过解绑期后，重新委托自动完成。</p> <h4 id="查询重新委托"><a href="#查询重新委托" aria-hidden="true" class="header-anchor">#</a> 查询重新委托</h4> <p>开始重新授权后，你可以使用以下命令查看其信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking redelegation <span class="token operator">&lt;</span>delegator_addr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>src_val_addr<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>dst_val_addr<span class="token operator">&gt;</span>
</code></pre></div><p>或者，如果你可以检查所有当前的unbonding-delegation：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking redelegations <span class="token operator">&lt;</span>account_cosmos<span class="token operator">&gt;</span>
</code></pre></div><p>此外，你可以查询某个特定验证人的所有转出的重新绑定：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking redelegations-from <span class="token operator">&lt;</span>account_gardval<span class="token operator">&gt;</span>
</code></pre></div><p>添加<code>--height</code>标识来查询之前某个特定区块的redelegation。</p> <h4 id="查询参数-2"><a href="#查询参数-2" aria-hidden="true" class="header-anchor">#</a> 查询参数</h4> <p>参数定义了staking的高级参数。你可以使用以下方法获取：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking params
</code></pre></div><p>使用上面的命令，你将获得以下值：</p> <ul><li>unbonding时间</li> <li>验证人的最大数量</li> <li>用于抵押的币种</li></ul> <p>所有这些值都将通过对一个<code>ParameterChange</code>提案的<code>governance</code>流程进行更新。</p> <h4 id="查询抵押池"><a href="#查询抵押池" aria-hidden="true" class="header-anchor">#</a> 查询抵押池</h4> <p>一个抵押池定义了当前状态的动态参数。你可以通过以下命令查询：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query staking pool
</code></pre></div><p>使用<code>pool</code>命令，你将获得以下值：</p> <ul><li>未绑定和已绑定的token</li> <li>token总量</li> <li>当前的年度通货膨胀率以及上次发生通货膨胀的区块</li> <li>最后记录的绑定股权</li></ul> <h4 id="查询对验证人的绑定"><a href="#查询对验证人的绑定" aria-hidden="true" class="header-anchor">#</a> 查询对验证人的绑定</h4> <p>你可以查询对某个验证人的所有绑定：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query delegations-to <span class="token operator">&lt;</span>account_gardval<span class="token operator">&gt;</span>
</code></pre></div><h3 id="治理"><a href="#治理" aria-hidden="true" class="header-anchor">#</a> 治理</h3> <p>治理是 Hashgard 的用户可以就软件升级、参数或自定义文本提案并达成共识的过程。
这是通过对提案进行投票来完成的，提案将由主要网络上的<code>GARD</code>持有者提交。</p> <p>关于投票过程的一些考虑因素：</p> <ul><li>投票由绑定<code>GARD</code>的持有者以1个绑定的<code>GARD</code>对应1票方式投出</li> <li>委托人不投票的话会将票权继承给其验证人</li> <li><strong>验证人必须对每个提案进行投票</strong>。如果验证人未对提案进行投票，则会对其进行削减处罚。</li> <li>投票期结束时（主网上是2周）统计投票。每个地址可以多次投票以更新其<code>Option</code>值（每次支付交易费用），
只有最后一次投票将被视为有效。</li> <li>选民可以选择<code>Yes</code>，<code>No</code>，<code>NoWithVeto</code>和<code>Abstain</code>选项。在投票结束时，
如果<code>( YesVotes / ( YesVotes + NoVotes + NoWithVetoVotes ) ) &gt; 1/2</code>
且<code>( NoWithVetoVotes / ( YesVotes + NoVotes + NoWithVetoVotes )) &lt; 1/3</code>提案通过，否则就拒绝。</li></ul> <p>有关治理流程及其工作原理的更多信息，请查看Governance模块<a href>规范</a>。</p> <h4 id="创建一个治理提案"><a href="#创建一个治理提案" aria-hidden="true" class="header-anchor">#</a> 创建一个治理提案</h4> <p>要创建治理提案，您必须提交初始抵押以及标题和说明。治理之外的其它模块可以实现自己的提议类型和处理程序
（例如：参数更改），其中治理模块本身支持<code>Text</code>提议。治理之外的任何模块都将命令绑定在<code>submit-proposal</code>上。</p> <p>提交一个文本类型的提案：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx gov submit-proposal <span class="token punctuation">\</span>
  --title<span class="token operator">=</span><span class="token operator">&lt;</span>title<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --description<span class="token operator">=</span><span class="token operator">&lt;</span>description<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --type<span class="token operator">=</span><span class="token string">&quot;Text&quot;</span> <span class="token punctuation">\</span>
  --deposit<span class="token operator">=</span><span class="token string">&quot;1000000agard&quot;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><p>您也可以直接通过<code>--proposal</code>指向包含提案的 JSON 文件。</p> <p>要提交更改参数的提案，您必须提供提案文件，因为其内容对 CLI 输入不太友好：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx gov submit-proposal param-change <span class="token operator">&lt;</span>path/to/proposal.json<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><p>其中<code>proposal.json</code>包含以下内容：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Param Change&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;description&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Update max validators&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;changes&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;subspace&quot;</span><span class="token operator">:</span> <span class="token string">&quot;staking&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;key&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MaxValidators&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token number">105</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;deposit&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;denom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;stake&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;amount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10000000&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Warning</p> <p>目前，参数更改已经过<em>评估</em>但未<em>经过验证</em>，因此<code>value</code>对于其相应参数，
任何更改都是有效的（即正确类型和边界内）非常重要，例如 <code>MaxValidators</code> 应该是整数而不是小数。</p> <p>正确审查参数变更提案应该可以防止这种情况发生（在治理过程中不会发生抵押），但无论如何都应该注意。</p></div></div> <div class="tip custom-block"><p class="custom-block-title">Note</p> <p>目前不支持<code>SoftwareUpgrade</code>，因为它没有实现，目前与<code>Text</code>提议的语义没有区别。</p></div> <h4 id="查询提案"><a href="#查询提案" aria-hidden="true" class="header-anchor">#</a> 查询提案</h4> <p>一旦创建，你就可以查询提案的信息：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov proposal <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span>
</code></pre></div><p>或者查询所有的有效提案：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov proposals
</code></pre></div><p>你还可以使用<code>voter</code>或<code>depositor</code>标识来过滤查询提案。</p> <p>要查询特定提案的提议人：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov proposer <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span>
</code></pre></div><h4 id="增加存入金"><a href="#增加存入金" aria-hidden="true" class="header-anchor">#</a> 增加存入金</h4> <p>为了将提案广播到网络，存入的金额必须高于<code>minDeposit</code>值（初始值：<code>10gard</code>）。
如果你之前创建的提案不符合此要求，你仍可以增加存入的总金额以激活它。达到最低存入金后，提案进入投票期：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx gov deposit <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span> <span class="token string">&quot;10000000gard&quot;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><blockquote><p>注意：达到<code>MaxDepositPeriod</code>后，将删除不符合此要求的提案。</p></blockquote> <h4 id="查询存入金"><a href="#查询存入金" aria-hidden="true" class="header-anchor">#</a> 查询存入金</h4> <p>创建新提案后，你可以查询提交其所有存款：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov deposits <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span>
</code></pre></div><p>你还可以查询特定地址提交的存入金：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov deposit <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>depositor_address<span class="token operator">&gt;</span>
</code></pre></div><h4 id="投票给一个提案"><a href="#投票给一个提案" aria-hidden="true" class="header-anchor">#</a> 投票给一个提案</h4> <p>在提案的存入金达到<code>MinDeposit</code>后，投票期将开放。抵押了<code>GARD</code>的持有人可以投票：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx gov vote <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>Yes/No/NoWithVeto/Abstain<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>name<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --chain-id<span class="token operator">=</span><span class="token operator">&lt;</span>chain_id<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询投票"><a href="#查询投票" aria-hidden="true" class="header-anchor">#</a> 查询投票</h4> <p>使用您刚才提交的参数检查投票：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov vote <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>voter_address<span class="token operator">&gt;</span>
</code></pre></div><p>你还可以查询提交给所有此前投给指定提案的投票：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov votes <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询提案的计票结果"><a href="#查询提案的计票结果" aria-hidden="true" class="header-anchor">#</a> 查询提案的计票结果</h4> <p>要检查指定提案的当前计票，你可以使用<code>tally</code>命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov tally <span class="token operator">&lt;</span>proposal_id<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询治理参数"><a href="#查询治理参数" aria-hidden="true" class="header-anchor">#</a> 查询治理参数</h4> <p>要检查当前的治理参数，请运行：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov params
</code></pre></div><p>查询运行的治理参数的子集：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query gov param voting
hashgardcli query gov param tallying
hashgardcli query gov param deposit
</code></pre></div><h3 id="费用分配"><a href="#费用分配" aria-hidden="true" class="header-anchor">#</a> 费用分配</h3> <h4 id="查询分配参数"><a href="#查询分配参数" aria-hidden="true" class="header-anchor">#</a> 查询分配参数</h4> <p>查询当前的分配参数：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query distribution params
</code></pre></div><h4 id="查询"><a href="#查询" aria-hidden="true" class="header-anchor">#</a> 查询</h4> <p>查询当前未结算的（未提取）的奖励：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query distribution outstanding-rewards
</code></pre></div><h4 id="查询验证人佣金"><a href="#查询验证人佣金" aria-hidden="true" class="header-anchor">#</a> 查询验证人佣金</h4> <p>查询对一个验证人的未结算的佣金：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query distribution commission <span class="token operator">&lt;</span>validator_address<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询验证人的削减处罚"><a href="#查询验证人的削减处罚" aria-hidden="true" class="header-anchor">#</a> 查询验证人的削减处罚</h4> <p>查询一个验证人的处罚历史记录：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query distribution slashes <span class="token operator">&lt;</span>validator_address<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>start_height<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>end_height<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询委托人奖励"><a href="#查询委托人奖励" aria-hidden="true" class="header-anchor">#</a> 查询委托人奖励</h4> <p>查询某笔委托当前的奖励（如果要取回）：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query distribution rewards <span class="token operator">&lt;</span>delegator_address<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>validator_address<span class="token operator">&gt;</span>
</code></pre></div><h4 id="查询所有的委托人奖励"><a href="#查询所有的委托人奖励" aria-hidden="true" class="header-anchor">#</a> 查询所有的委托人奖励</h4> <p>要查询委托人的所有当前奖励（如果要取回），请运行：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli query distribution rewards <span class="token operator">&lt;</span>delegator_address<span class="token operator">&gt;</span>
</code></pre></div><h3 id="多签交易"><a href="#多签交易" aria-hidden="true" class="header-anchor">#</a> 多签交易</h3> <p>多签交易需要多个私钥的签名。因此，从多签账户生成和签署交易涉及有关各方之间的合作。
密钥持有者的任何一方都可以发起多签，并且至少要有其中一方需要将其他账户的公钥导入到本地的数据库
并生成多签公钥来完成和广播该笔交易。</p> <p>例如，给定包含密钥<code>p1</code>，<code>p2</code>和<code>p3</code>的多签密钥，每个密钥由不同方持有，
持有<code>p1</code>的用户将需要导入<code>p2</code>和<code>p3</code>的公钥以生成多签帐户公钥：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys <span class="token function">add</span> <span class="token punctuation">\</span>
  p2 <span class="token punctuation">\</span>
  --pubkey<span class="token operator">=</span>cosmospub1addwnpepqtd28uwa0yxtwal5223qqr5aqf5y57tc7kk7z8qd4zplrdlk5ez5kdnlrj4

hashgardcli keys <span class="token function">add</span> <span class="token punctuation">\</span>
  p3 <span class="token punctuation">\</span>
  --pubkey<span class="token operator">=</span>cosmospub1addwnpepqgj04jpm9wrdml5qnss9kjxkmxzywuklnkj0g3a3f8l5wx9z4ennz84ym5t

hashgardcli keys <span class="token function">add</span> <span class="token punctuation">\</span>
  p1p2p3 <span class="token punctuation">\</span>
  --multisig-threshold<span class="token operator">=</span><span class="token number">2</span> <span class="token punctuation">\</span>
  --multisig<span class="token operator">=</span>p1,p2,p3
</code></pre></div><p>已存储新的多签公钥<code>p1p2p3</code>，其地址将用作多签交易的签名者：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys show --address p1p2p3
</code></pre></div><p>您还可以通过查看 key 的 JSON 输出或增加<code>--show-multisig</code>标识来查看multisig阈值，pubkey构成和相应的权重：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli keys show p1p2p3 -o json

hashgardcli keys show p1p2p3 --show-multisig
</code></pre></div><p>创建多签交易的第一步是使用上面创建的多签地址初始化：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx send cosmos1570v2fq3twt0f0x02vhxpuzc9jc4yl30q2qned 10000000gard <span class="token punctuation">\</span>
  --from<span class="token operator">=</span><span class="token operator">&lt;</span>multisig_address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --generate-only <span class="token operator">&gt;</span> unsignedTx.json
</code></pre></div><p><code>unsignedTx.json</code>文件包含以JSON编码的未签署交易。<code>p1</code>现在可以使用自己的私钥对交易进行签名：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx sign <span class="token punctuation">\</span>
  unsignedTx.json <span class="token punctuation">\</span>
  --multisig<span class="token operator">=</span><span class="token operator">&lt;</span>multisig_address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span>p1 <span class="token punctuation">\</span>
  --output-document<span class="token operator">=</span>p1signature.json 
</code></pre></div><p>生成签名后，<code>p1</code>将<code>unsignedTx.json</code>和<code>p1signature.json</code>都发送到<code>p2</code>或<code>p3</code>，
然后<code>p2</code>或<code>p3</code>将生成它们各自的签名:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx sign <span class="token punctuation">\</span>
  unsignedTx.json <span class="token punctuation">\</span>
  --multisig<span class="token operator">=</span><span class="token operator">&lt;</span>multisig_address<span class="token operator">&gt;</span> <span class="token punctuation">\</span>
  --from<span class="token operator">=</span>p2 <span class="token punctuation">\</span>
  --output-document<span class="token operator">=</span>p2signature.json
</code></pre></div><p><code>p1p2p3</code> 是 2-of-3 多签key，因此一个的签名就足够了。 现在，任何密钥持有者都可以通过组合所需的签名文件来生成多签交易：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx multisign <span class="token punctuation">\</span>
  unsignedTx.json <span class="token punctuation">\</span>
  p1p2p3 <span class="token punctuation">\</span>
  p1signature.json p2signature.json <span class="token operator">&gt;</span> signedTx.json
</code></pre></div><p>现在可以把交易发送给节点：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgardcli tx broadcast signedTx.json
</code></pre></div><h3 id="智能合约"><a href="#智能合约" aria-hidden="true" class="header-anchor">#</a> 智能合约</h3> <p>Hashgard 在 cosmos-sdk 的基础上首次实现了智能合约虚拟机的支持。
开发者可以使用 <code>Python 3.x</code> 编写智能合约，在 Hashgard 虚拟机中运行。</p> <h4 id="智能合约编写"><a href="#智能合约编写" aria-hidden="true" class="header-anchor">#</a> 智能合约编写</h4> <p>开发者可以使用 <code>Python 3.x</code> 编写智能合约，智能合约中支持的指令见<a href="/github-pages/translations/cn/smart-contract-opcode.html">Hashgard VM 指令集</a></p> <h4 id="智能合约部署"><a href="#智能合约部署" aria-hidden="true" class="header-anchor">#</a> 智能合约部署</h4> <p>部署命令用法：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli tx contract deploy [contract_code] [contract_name] [flags]
</code></pre></div><p>部署命令示例：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli tx contract deploy sc-hello.hvm sc-hello --from foo
</code></pre></div><h4 id="智能合约调用"><a href="#智能合约调用" aria-hidden="true" class="header-anchor">#</a> 智能合约调用</h4> <p>合约调用命令用法：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli tx contract call [contract_address] [params] [flags]
</code></pre></div><p>合约调用命令示例：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli tx contract call contract60cb028ff7e2cbf5d9883577ef6caf6c6c045b0b &quot;string:hello,[string:world]&quot; --from foo
</code></pre></div><h4 id="智能合约查询"><a href="#智能合约查询" aria-hidden="true" class="header-anchor">#</a> 智能合约查询</h4> <p>查询命令：</p> <ol><li><code>query contract detail</code> 查询合约部署信息。</li> <li><code>query contract method</code> 查询合约中提供的查询方法。</li> <li><code>query contract data</code> 查询合约内部状态信息。</li> <li><code>query contract token</code> 查询合约发行的代币信息。</li></ol> <p>查询合约部署信息命令用法及示例：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract detail [contract_address] [flags]
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract detail contract60cb028ff7e2cbf5d9883577ef6caf6c6c045b0b
</code></pre></div><p>查询合约的查询方法命令用法及示例：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract method [contract_address] [params] [flags]
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract method contract60cb028ff7e2cbf5d9883577ef6caf6c6c045b0b &quot;string:hello,[string:world]&quot;
</code></pre></div><p>查询合约内部状态信息命令用法及示例：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract data [contract_address] [flags]
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract data contract60cb028ff7e2cbf5d9883577ef6caf6c6c045b0b
</code></pre></div><p>查询合约发行的代币信息命令用法及示例：</p> <div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract token [contract_address] [flags]
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>hashgardcli query contract token contract60cb028ff7e2cbf5d9883577ef6caf6c6c045b0b
</code></pre></div><h2 id="shell-自动补全脚本"><a href="#shell-自动补全脚本" aria-hidden="true" class="header-anchor">#</a> shell 自动补全脚本</h2> <p>可以通过完全命令生成主流的UNIX shell解释器（如<code>Bash</code>和<code>Zsh</code>）的<code>completion</code>命令，
该命令可用于<code>hashgard</code>和<code>hashgardcli</code>。</p> <p>如果要生成Bash完成脚本，请运行以下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgard completion <span class="token operator">&gt;</span> hashgard_completion
hashgardcli completion <span class="token operator">&gt;</span> hashgardcli_completion
</code></pre></div><p>如果要生成Zsh完成脚本，请运行以下命令：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>hashgard completion --zsh <span class="token operator">&gt;</span> hashgard_completion
hashgardcli completion --zsh <span class="token operator">&gt;</span> hashgardcli_completion
</code></pre></div><p>:::
在大多数UNIX系统上，可以在<code>.bashrc</code>或<code>.bash_profile</code>中加载此类脚本以启用Bash自动完成：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token builtin class-name">echo</span> <span class="token string">'. hashgard_completion'</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc
<span class="token builtin class-name">echo</span> <span class="token string">'. hashgardcli_completion'</span> <span class="token operator">&gt;&gt;</span> ~/.bashrc
</code></pre></div><p>有关如何启用shell自动完成的信息，请参阅操作系统提供的解释器用户手册。
:::</p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/29/2019, 4:35:51 PM</span></div></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/github-pages/translations/cn/delegator-guide-cli.html" class="prev">
          委托人指南
        </a></span> <span class="next"><a href="/github-pages/translations/cn/smart-contract-opcode.html">
          Hasghard 虚拟机
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/github-pages/assets/js/app.bf5dd73f.js" defer></script><script src="/github-pages/assets/js/28.79a6a4bc.js" defer></script>
  </body>
</html>
