<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Deploy Your Own Hashgard Testnet | Hashgard 文档中心</title>
    <meta name="description" content="Hashgard - 新一代数字金融公有链">
    <link rel="icon" href="/github-pages/favicon.ico">
    
    <link rel="preload" href="/github-pages/assets/css/0.styles.b9164be3.css" as="style"><link rel="preload" href="/github-pages/assets/js/app.bf5dd73f.js" as="script"><link rel="preload" href="/github-pages/assets/js/6.91a869c6.js" as="script"><link rel="prefetch" href="/github-pages/assets/js/10.66d8a0a0.js"><link rel="prefetch" href="/github-pages/assets/js/11.8393ad55.js"><link rel="prefetch" href="/github-pages/assets/js/12.2ccfd939.js"><link rel="prefetch" href="/github-pages/assets/js/13.a1e900b1.js"><link rel="prefetch" href="/github-pages/assets/js/14.5371c486.js"><link rel="prefetch" href="/github-pages/assets/js/15.a9ccdc54.js"><link rel="prefetch" href="/github-pages/assets/js/16.3e94299c.js"><link rel="prefetch" href="/github-pages/assets/js/17.ede0b19c.js"><link rel="prefetch" href="/github-pages/assets/js/18.3af42029.js"><link rel="prefetch" href="/github-pages/assets/js/19.a2d187e3.js"><link rel="prefetch" href="/github-pages/assets/js/2.142e358d.js"><link rel="prefetch" href="/github-pages/assets/js/20.b8d36e32.js"><link rel="prefetch" href="/github-pages/assets/js/21.205c43c0.js"><link rel="prefetch" href="/github-pages/assets/js/22.286073fa.js"><link rel="prefetch" href="/github-pages/assets/js/23.efc1cb0e.js"><link rel="prefetch" href="/github-pages/assets/js/24.2dfe9c4e.js"><link rel="prefetch" href="/github-pages/assets/js/25.d087c3a9.js"><link rel="prefetch" href="/github-pages/assets/js/26.41d9e0bc.js"><link rel="prefetch" href="/github-pages/assets/js/27.3cf1115d.js"><link rel="prefetch" href="/github-pages/assets/js/28.79a6a4bc.js"><link rel="prefetch" href="/github-pages/assets/js/29.bd1647a7.js"><link rel="prefetch" href="/github-pages/assets/js/3.89cb87cc.js"><link rel="prefetch" href="/github-pages/assets/js/30.6ac3d706.js"><link rel="prefetch" href="/github-pages/assets/js/31.02ff2623.js"><link rel="prefetch" href="/github-pages/assets/js/32.fb021007.js"><link rel="prefetch" href="/github-pages/assets/js/33.667cd9de.js"><link rel="prefetch" href="/github-pages/assets/js/34.a48306a7.js"><link rel="prefetch" href="/github-pages/assets/js/35.851f6478.js"><link rel="prefetch" href="/github-pages/assets/js/36.74cda06d.js"><link rel="prefetch" href="/github-pages/assets/js/37.ea2a4a80.js"><link rel="prefetch" href="/github-pages/assets/js/38.c5aa82e0.js"><link rel="prefetch" href="/github-pages/assets/js/39.88839b3f.js"><link rel="prefetch" href="/github-pages/assets/js/4.46e45bad.js"><link rel="prefetch" href="/github-pages/assets/js/40.c7efa84e.js"><link rel="prefetch" href="/github-pages/assets/js/41.e6bd18b4.js"><link rel="prefetch" href="/github-pages/assets/js/42.1b3526ab.js"><link rel="prefetch" href="/github-pages/assets/js/43.bdff1f53.js"><link rel="prefetch" href="/github-pages/assets/js/44.c49a7c9a.js"><link rel="prefetch" href="/github-pages/assets/js/45.107ae8d1.js"><link rel="prefetch" href="/github-pages/assets/js/46.9f6183cf.js"><link rel="prefetch" href="/github-pages/assets/js/47.2662ebc5.js"><link rel="prefetch" href="/github-pages/assets/js/48.24949fb1.js"><link rel="prefetch" href="/github-pages/assets/js/49.90dc2b11.js"><link rel="prefetch" href="/github-pages/assets/js/5.1c9843c5.js"><link rel="prefetch" href="/github-pages/assets/js/50.2922ec7c.js"><link rel="prefetch" href="/github-pages/assets/js/51.dbff27f4.js"><link rel="prefetch" href="/github-pages/assets/js/52.c10ce7e1.js"><link rel="prefetch" href="/github-pages/assets/js/53.d08b6929.js"><link rel="prefetch" href="/github-pages/assets/js/54.201ebb77.js"><link rel="prefetch" href="/github-pages/assets/js/55.a9ff3e03.js"><link rel="prefetch" href="/github-pages/assets/js/56.75632402.js"><link rel="prefetch" href="/github-pages/assets/js/57.24c019ec.js"><link rel="prefetch" href="/github-pages/assets/js/58.74fd37d5.js"><link rel="prefetch" href="/github-pages/assets/js/59.306e59ce.js"><link rel="prefetch" href="/github-pages/assets/js/7.9242222d.js"><link rel="prefetch" href="/github-pages/assets/js/8.49613224.js"><link rel="prefetch" href="/github-pages/assets/js/9.f4880d52.js">
    <link rel="stylesheet" href="/github-pages/assets/css/0.styles.b9164be3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/github-pages/" class="home-link router-link-active"><!----> <span class="site-name">Hashgard 文档中心</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/github-pages/translations/cn/what-is-hashgard.html" class="nav-link">教程</a></div><div class="nav-item"><a href="/github-pages/translations/cn/hashgardcli.html" class="nav-link">命令</a></div> <a href="https://github.com/hashgard/github-pages" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/github-pages/translations/cn/what-is-hashgard.html" class="nav-link">教程</a></div><div class="nav-item"><a href="/github-pages/translations/cn/hashgardcli.html" class="nav-link">命令</a></div> <a href="https://github.com/hashgard/github-pages" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading open"><span>总览</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/github-pages/translations/cn/what-is-hashgard.html" class="sidebar-link">Hashgard是什么</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>教程</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="deploy-your-own-hashgard-testnet"><a href="#deploy-your-own-hashgard-testnet" aria-hidden="true" class="header-anchor">#</a> Deploy Your Own Hashgard Testnet</h1> <p>This document describes 3 ways to setup a network of <code>hashgard</code> nodes, each serving a different usecase:</p> <ol><li>Single-node, local, manual testnet</li> <li>Multi-node, local, automated testnet</li> <li>Multi-node, remote, automated testnet</li></ol> <p>Supporting code can be found in the <a href="https://gitlab.hashgard.com/hashgard/hashgard/tree/master/networks" target="_blank" rel="noopener noreferrer">networks directory<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and additionally the <code>local</code> or <code>remote</code> sub-directories.</p> <blockquote><p>NOTE: The <code>remote</code> network bootstrapping may be out of sync with the latest releases and is not to be relied upon.</p></blockquote> <h2 id="available-docker-images"><a href="#available-docker-images" aria-hidden="true" class="header-anchor">#</a> Available Docker images</h2> <p>In case you need to use or deploy gaia as a container you could skip the <code>build</code> steps and use the official images, $TAG stands for the version you are interested in:</p> <ul><li><code>docker run -it -v ~/.hashgard:/root/.hashgard -v ~/.hashgardcli:/root/.hashgardcli tendermint:$TAG hashgard init</code></li> <li><code>docker run -it -p 26657:26657 -p 26656:26656 -v ~/.hashgard:/root/.hashgard -v ~/.hashgardcli:/root/.hashgardcli tendermint:$TAG hashgard start</code></li> <li>...</li> <li><code>docker run -it -v ~/.hashgard:/root/.hashgard -v ~/.hashgardcli:/root/.hashgardcli tendermint:$TAG hashgardcli version</code></li></ul> <p>The same images can be used to build your own docker-compose stack.</p> <h2 id="single-node-local-manual-testnet"><a href="#single-node-local-manual-testnet" aria-hidden="true" class="header-anchor">#</a> Single-node, Local, Manual Testnet</h2> <p>This guide helps you create a single validator node that runs a network locally for testing and other development related uses.</p> <h3 id="requirements"><a href="#requirements" aria-hidden="true" class="header-anchor">#</a> Requirements</h3> <ul><li><a href="/github-pages/installation.html">Install gaia</a></li> <li><a href="https://stedolan.github.io/jq/download/" target="_blank" rel="noopener noreferrer">Install <code>jq</code><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (optional)</li></ul> <h3 id="create-genesis-file-and-start-the-network"><a href="#create-genesis-file-and-start-the-network" aria-hidden="true" class="header-anchor">#</a> Create Genesis File and Start the Network</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># You can run all of these commands from your home directory</span>
<span class="token builtin class-name">cd</span> <span class="token environment constant">$HOME</span>

<span class="token comment"># Initialize the genesis.json file that will help you to bootstrap the network</span>
hashgard init --chain-id<span class="token operator">=</span>testing testing

<span class="token comment"># Create a key to hold your validator account</span>
hashgardcli keys <span class="token function">add</span> validator

<span class="token comment"># Add that key into the genesis.app_state.accounts array in the genesis file</span>
<span class="token comment"># NOTE: this command lets you set the number of coins. Make sure this account has some coins</span>
<span class="token comment"># with the genesis.app_state.staking.params.bond_denom denom, the default is staking</span>
hashgard add-genesis-account <span class="token variable"><span class="token variable">$(</span>hashgardcli keys show validator -a<span class="token variable">)</span></span> 1000000000stake,1000000000validatortoken

<span class="token comment"># Generate the transaction that creates your validator</span>
hashgard gentx --name validator

<span class="token comment"># Add the generated bonding transaction to the genesis file</span>
hashgard collect-gentxs

<span class="token comment"># Now its safe to start `hashgard`</span>
hashgard start
</code></pre></div><p>This setup puts all the data for <code>hashgard</code> in <code>~/.hashgard</code>. You can examine the genesis file you created at <code>~/.hashgard/config/genesis.json</code>. With this configuration <code>hashgardcli</code> is also ready to use and has an account with tokens (both staking and custom).</p> <h2 id="multi-node-local-automated-testnet"><a href="#multi-node-local-automated-testnet" aria-hidden="true" class="header-anchor">#</a> Multi-node, Local, Automated Testnet</h2> <p>From the <a href="https://gitlab.hashgard.com/hashgard/hashgard/tree/master/networks/local" target="_blank" rel="noopener noreferrer">networks/local directory<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>:</p> <h3 id="requirements-2"><a href="#requirements-2" aria-hidden="true" class="header-anchor">#</a> Requirements</h3> <ul><li><a href="/github-pages/installation.html">Install gaia</a></li> <li><a href="https://docs.docker.com/engine/installation/" target="_blank" rel="noopener noreferrer">Install docker<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">Install docker-compose<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="build"><a href="#build" aria-hidden="true" class="header-anchor">#</a> Build</h3> <p>Build the <code>hashgard</code> binary (linux) and the <code>tendermint/hashgardnode</code> docker image required for running the <code>localnet</code> commands. This binary will be mounted into the container and can be updated rebuilding the image, so you only need to build the image once.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># Work from the SDK repo</span>
<span class="token builtin class-name">cd</span> <span class="token variable">$GOPATH</span>/src/gitlab.hashgard.com/hashgard/hashgard

<span class="token comment"># Build the linux binary in ./build</span>
<span class="token function">make</span> build-linux

<span class="token comment"># Build tendermint/hashgardnode image</span>
<span class="token function">make</span> build-docker-hashgardnode
</code></pre></div><h3 id="run-your-testnet"><a href="#run-your-testnet" aria-hidden="true" class="header-anchor">#</a> Run Your Testnet</h3> <p>To start a 4 node testnet run:</p> <div class="language- extra-class"><pre class="language-text"><code>make localnet-start
</code></pre></div><p>This command creates a 4-node network using the hashgardnode image.
The ports for each node are found in this table:</p> <table><thead><tr><th>Node ID</th> <th>P2P Port</th> <th>RPC Port</th></tr></thead> <tbody><tr><td><code>gaianode0</code></td> <td><code>26656</code></td> <td><code>26657</code></td></tr> <tr><td><code>gaianode1</code></td> <td><code>26659</code></td> <td><code>26660</code></td></tr> <tr><td><code>gaianode2</code></td> <td><code>26661</code></td> <td><code>26662</code></td></tr> <tr><td><code>gaianode3</code></td> <td><code>26663</code></td> <td><code>26664</code></td></tr></tbody></table> <p>To update the binary, just rebuild it and restart the nodes:</p> <div class="language- extra-class"><pre class="language-text"><code>make build-linux localnet-start
</code></pre></div><h3 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h3> <p>The <code>make localnet-start</code> creates files for a 4-node testnet in <code>./build</code> by
calling the <code>hashgard testnet</code> command. This outputs a handful of files in the
<code>./build</code> directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ tree -L <span class="token number">2</span> build/
build/
├── hashgardcli
├── hashgard
├── gentxs
│   ├── node0.json
│   ├── node1.json
│   ├── node2.json
│   └── node3.json
├── node0
│   ├── hashgardcli
│   │   ├── key_seed.json
│   │   └── keys
│   └── hashgard
│       ├── <span class="token variable">${LOG<span class="token operator">:-</span>hashgard.log}</span>
│       ├── config
│       └── data
├── node1
│   ├── hashgardcli
│   │   └── key_seed.json
│   └── hashgard
│       ├── <span class="token variable">${LOG<span class="token operator">:-</span>hashgard.log}</span>
│       ├── config
│       └── data
├── node2
│   ├── hashgardcli
│   │   └── key_seed.json
│   └── hashgard
│       ├── <span class="token variable">${LOG<span class="token operator">:-</span>hashgard.log}</span>
│       ├── config
│       └── data
└── node3
    ├── hashgardcli
    │   └── key_seed.json
    └── hashgard
        ├── <span class="token variable">${LOG<span class="token operator">:-</span>hashgard.log}</span>
        ├── config
        └── data
</code></pre></div><p>Each <code>./build/nodeN</code> directory is mounted to the <code>/hashgard</code> directory in each container.</p> <h3 id="logging"><a href="#logging" aria-hidden="true" class="header-anchor">#</a> Logging</h3> <p>Logs are saved under each <code>./build/nodeN/hashgard/gaia.log</code>. You can also watch logs
directly via Docker, for example:</p> <div class="language- extra-class"><pre class="language-text"><code>docker logs -f hashgardnode0
</code></pre></div><h3 id="keys-accounts"><a href="#keys-accounts" aria-hidden="true" class="header-anchor">#</a> Keys &amp; Accounts</h3> <p>To interact with <code>hashgardcli</code> and start querying state or creating txs, you use the
<code>hashgardcli</code> directory of any given node as your <code>home</code>, for example:</p> <div class="language-shell extra-class"><pre class="language-shell"><code>hashgardcli keys list --home ./build/node0/hashgardcli
</code></pre></div><p>Now that accounts exists, you may create new accounts and send those accounts
funds!</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p><strong>Note</strong>: Each node's seed is located at <code>./build/nodeN/hashgardcli/key_seed.json</code> and can be restored to the CLI using the <code>hashgardcli keys add --restore</code> command</p></div> <h3 id="special-binaries"><a href="#special-binaries" aria-hidden="true" class="header-anchor">#</a> Special Binaries</h3> <p>If you have multiple binaries with different names, you can specify which one to run with the BINARY environment variable. The path of the binary is relative to the attached volume. For example:</p> <div class="language- extra-class"><pre class="language-text"><code># Run with custom binary
BINARY=gaiafoo make localnet-start
</code></pre></div><h2 id="multi-node-remote-automated-testnet"><a href="#multi-node-remote-automated-testnet" aria-hidden="true" class="header-anchor">#</a> Multi-Node, Remote, Automated Testnet</h2> <p>The following should be run from the <a href="https://gitlab.hashgard.com/hashgard/hashgard/tree/master/networks" target="_blank" rel="noopener noreferrer">networks directory<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h3 id="terraform-ansible"><a href="#terraform-ansible" aria-hidden="true" class="header-anchor">#</a> Terraform &amp; Ansible</h3> <p>Automated deployments are done using <a href="https://www.terraform.io/" target="_blank" rel="noopener noreferrer">Terraform<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to create servers on AWS then
<a href="http://www.ansible.com/" target="_blank" rel="noopener noreferrer">Ansible<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to create and manage testnets on those servers.</p> <h3 id="prerequisites"><a href="#prerequisites" aria-hidden="true" class="header-anchor">#</a> Prerequisites</h3> <ul><li>Install <a href="https://www.terraform.io/downloads.html" target="_blank" rel="noopener noreferrer">Terraform<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> and <a href="http://docs.ansible.com/ansible/latest/installation_guide/intro_installation.html" target="_blank" rel="noopener noreferrer">Ansible<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> on a Linux machine.</li> <li>Create an <a href="https://docs.aws.amazon.com/general/latest/gr/managing-aws-access-keys.html" target="_blank" rel="noopener noreferrer">AWS API token<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> with EC2 create capability.</li> <li>Create SSH keys</li></ul> <div class="language- extra-class"><pre class="language-text"><code>export AWS_ACCESS_KEY_ID=&quot;2345234jk2lh4234&quot;
export AWS_SECRET_ACCESS_KEY=&quot;234jhkg234h52kh4g5khg34&quot;
export TESTNET_NAME=&quot;remotenet&quot;
export CLUSTER_NAME= &quot;remotenetvalidators&quot;
export SSH_PRIVATE_FILE=&quot;$HOME/.ssh/id_rsa&quot;
export SSH_PUBLIC_FILE=&quot;$HOME/.ssh/id_rsa.pub&quot;
</code></pre></div><p>These will be used by both <code>terraform</code> and <code>ansible</code>.</p> <h3 id="create-a-remote-network"><a href="#create-a-remote-network" aria-hidden="true" class="header-anchor">#</a> Create a Remote Network</h3> <div class="language- extra-class"><pre class="language-text"><code>SERVERS=1 REGION_LIMIT=1 make validators-start
</code></pre></div><p>The testnet name is what's going to be used in --chain-id, while the cluster name is the administrative tag in AWS for the servers. The code will create SERVERS amount of servers in each availability zone up to the number of REGION_LIMITs, starting at us-east-2. (us-east-1 is excluded.) The below BaSH script does the same, but sometimes it's more comfortable for input.</p> <div class="language- extra-class"><pre class="language-text"><code>./new-testnet.sh &quot;$TESTNET_NAME&quot; &quot;$CLUSTER_NAME&quot; 1 1
</code></pre></div><h3 id="quickly-see-the-status-endpoint"><a href="#quickly-see-the-status-endpoint" aria-hidden="true" class="header-anchor">#</a> Quickly see the /status Endpoint</h3> <div class="language- extra-class"><pre class="language-text"><code>make validators-status
</code></pre></div><h3 id="delete-servers"><a href="#delete-servers" aria-hidden="true" class="header-anchor">#</a> Delete Servers</h3> <div class="language- extra-class"><pre class="language-text"><code>make validators-stop
</code></pre></div><h3 id="logging-2"><a href="#logging-2" aria-hidden="true" class="header-anchor">#</a> Logging</h3> <p>You can ship logs to Logz.io, an Elastic stack (Elastic search, Logstash and Kibana) service provider. You can set up your nodes to log there automatically. Create an account and get your API key from the notes on <a href="https://app.logz.io/#/dashboard/data-sources/Filebeat" target="_blank" rel="noopener noreferrer">this page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, then:</p> <div class="language- extra-class"><pre class="language-text"><code>yum install systemd-devel || echo &quot;This will only work on RHEL-based systems.&quot;
apt-get install libsystemd-dev || echo &quot;This will only work on Debian-based systems.&quot;

go get github.com/mheese/journalbeat
ansible-playbook -i inventory/digital_ocean.py -l remotenet logzio.yml -e LOGZIO_TOKEN=ABCDEFGHIJKLMNOPQRSTUVWXYZ012345
</code></pre></div><h3 id="monitoring"><a href="#monitoring" aria-hidden="true" class="header-anchor">#</a> Monitoring</h3> <p>You can install the DataDog agent with:</p> <div class="language- extra-class"><pre class="language-text"><code>make datadog-install
</code></pre></div></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">9/10/2019, 11:38:20 AM</span></div></div> <!----> </div> <!----></div></div>
    <script src="/github-pages/assets/js/app.bf5dd73f.js" defer></script><script src="/github-pages/assets/js/6.91a869c6.js" defer></script>
  </body>
</html>
